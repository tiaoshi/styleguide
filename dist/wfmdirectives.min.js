"use strict";!function(){function a(){var a=this;a.isSelected=function(){return a.parentVm.isSelectedCard(a)},a.select=function(){a.parentVm.selectCard(a)}}function b(){return'<md-card ng-class="vm.isSelected() ? \'wfm-card-selected material-depth-2\' : \'wfm-card-unselected\' "><div ng-click=" vm.select()" class="wfm-card-title" transclude-id="header"></div><div class="wfm-card-content" ng-show="vm.isSelected()"><div transclude-id="body"></div></div></md-card>'}function c(){return{controller:"wfmCardCtrl",controllerAs:"vm",bindToController:!0,scope:{},template:b(),transclude:!0,require:["wfmCard","^wfmCardList"],link:function(a,b,c,d,e){var f=d[0];f.id=a.$id;var g=d[1];f.parentVm=g,e(function(a){angular.forEach(a,function(a){if(3!==a.nodeType){var c;"CARD-HEADER"===a.nodeName&&(c='[transclude-id="header"]'),"CARD-BODY"===a.nodeName&&(c='[transclude-id="body"]');var d=angular.element(b[0].querySelector(c));null!=d&&d.length?d.append(a):a.remove()}})})}}}function d(){return'<md-content class="wfm-card-list-container"><md-list class="wfm-card-list"><md-content ng-transclude></md-content></md-list></md-content>'}function e(a,b,c,d){d.allowMultiSelect="multiSelect"in c}angular.module("wfm.cardList",[]),angular.module("wfm.cardList").controller("wfmCardCtrl",a),angular.module("wfm.cardList").directive("wfmCard",c),angular.module("wfm.cardList").controller("wfmCardListCtrl",function(){var a=this;a.selectedCards={},a.selectCard=function(b){var c=void 0===a.selectedCards[b.id];a.allowMultiSelect||(a.selectedCards={}),c?a.selectedCards[b.id]=b:delete a.selectedCards[b.id]},a.isSelectedCard=function(b){return void 0!==a.selectedCards[b.id]}}),angular.module("wfm.cardList").directive("wfmCardList",function(){return{controller:"wfmCardListCtrl",controllerAs:"vm",bindToController:!0,transclude:!0,template:d(),link:e}})}(),function(){function a(a){function b(a){a.addClass("wfm-date-range-picker-wrap")}function c(b,c,e,f){function g(a,b){return!!(a&&angular.isDate(a.startDate)&&angular.isDate(a.endDate))}function h(a,b){return g(a,b)?a.startDate<=a.endDate:!0}function i(){b.startDate=n.$viewValue.startDate,b.endDate=n.$viewValue.endDate}function j(){n.$setViewValue({startDate:b.startDate,endDate:b.endDate})}function k(){b.dropDownState&&(b.dropDownState.showAllDatePickers||(b.dropDownState.showStartDatePicker=!1,b.dropDownState.showEndDatePicker=!1))}function l(){b.startDate&&b.endDate&&(b.dummyMinDate=new Date("1970-01-01"))}function m(a,c){return b.startDate&&b.endDate&&!moment(b.startDate).isAfter(b.endDate,"day")?"day"!==c||moment(a).isBefore(b.startDate,"day")||moment(a).isAfter(b.endDate,"day")?"":"in-date-range":""}var n=f[0];f[1];b.dummyMinDate=new Date("1970-01-01"),b.displayPopup=function(){return"popup"===b.templateType},d(b),b.dateFormat="shortDate",e.$observe("dateFormat",function(a){b.dateFormat=a}),b.setRangeClass=m,n.$validators.empty=g,n.$validators.order=h,n.$render=i,b.$watchCollection(function(){return b.startDate&&b.endDate?[a("date")(b.startDate,"yyyy-MM-dd"),a("date")(b.endDate,"yyyy-MM-dd")]:[null,null]},function(a){b.testStopUi||(j(),k(),l())}),b.$watch(function(){return b.dropDownState?b.dropDownState.showStartDatePicker&&b.dropDownState.showEndDatePicker:null},function(a){null!==a&&(b.dropDownState.showAllDatePickers=a)})}function d(a){a.dropDownState={showAllDatePickers:!1,showStartDatePicker:!1,showEndDatePicker:!1},a.onClickShowAllDates=function(){a.dropDownState.showAllDatePickers||(a.dropDownState.showStartDatePicker=a.dropDownState.showEndDatePicker=a.dropDownState.showAllDatePickers=!0)}}return{templateUrl:"directives/date-range-picker/date-range-picker.tpl.html",scope:{templateType:"=?",testStopUi:"@?"},controller:["$element",b],require:["ngModel","dateRangePicker"],link:c}}angular.module("wfm.daterangepicker",["styleguide.templates"]).directive("dateRangePicker",["$filter",a])}(),function(){var a;a=angular.module("wfm.modal",[]),a.provider("ngModalDefaults",function(){return{options:{closeButtonHtml:'<div class="head-actions panel-menu"><div tabindex=0 class="context-menu card-context"><i class="mdi mdi-close"></i></div></div>'},$get:function(){return this.options},set:function(a,b){var c,d,e;if("object"==typeof a){e=[];for(c in a)a.hasOwnProperty(c)&&(d=a[c],e.push(this.options[c]=d));return e}return this.options[a]=b,this.options[a]}}}),a.directive("modalDialog",["ngModalDefaults","$sce",function(a,b){return{restrict:"E",scope:{show:"=",dialogTitle:"@",onClose:"&?",infos:"="},replace:!0,transclude:!0,link:function(c,d,e){var f;f=function(){return c.closeButtonHtml=b.trustAsHtml(a.closeButtonHtml),c.closeButtonHtml},c.hideModal=function(){return c.show=!1,c.show},c.$watch("show",function(a,b){return!a&&b&&null!=c.onClose?c.onClose():void 0}),f()},template:"<div class='click-modal modal-box' ng-show='show'><div class='modalbg' ng-click='hideModal()'></div><div class='dialog material-depth-1' ng-style='dialogStyle'><div ng-click='hideModal()' ng-bind-html='closeButtonHtml'></div><div ng-transclude></div></div></div>"}}])}.call(this),function(){var a=angular.module("wfm.pagination",[]);a.run(["$templateCache",function(a){a.put("wfm-pagination-default.tpl.html",'<div class="pagination pull-right" ng-if="vm.paginationOptions.totalPages > 0">	<ul>		<li class=" pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == 1 || vm.paginationOptions.totalPages == 0}"		style="padding-top: 4px; padding-bottom: 4px;">			<a href="" ng-click="vm.gotoPage(1)">				<i class="mdi mdi-skip-previous"></i>			</a>		</li>		<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == 1 || vm.paginationOptions.totalPages == 0}"		style="padding-top: 4px; padding-bottom: 4px;">			<a href="" ng-click="vm.gotoPage(vm.paginationOptions.pageNumber - 1)">				<i class="mdi mdi-chevron-left"></i>			</a>		</li>		<li class="pagination-item" ng-repeat="n in vm.getVisiblePageNumbers()"			ng-class="{active: n == vm.paginationOptions.pageNumber}" ng-click="vm.gotoPage(n)" style="padding-top: 4px; padding-bottom: 4px;">			<a href="" ng-bind="n"></a>		</li>		<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == vm.paginationOptions.totalPages || vm.paginationOptions.totalPages == 0}"		style="padding-top: 4px; padding-bottom: 4px;">			<a href="" ng-click="vm.gotoPage(vm.paginationOptions.pageNumber + 1)">				<i class="mdi mdi-chevron-right"></i>			</a>		</li>		<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == vm.paginationOptions.totalPages || vm.paginationOptions.totalPages == 0}"		style="padding-top: 4px; padding-bottom: 4px;">			<a href="" ng-click="vm.gotoPage(vm.paginationOptions.totalPages)">				<i class="mdi mdi-skip-next"></i>			</a>		</li>	</ul></div>')}])}(),function(){function a(a,b,c,d){}var b=function(a){var b=this;b.gotoPage=function(a){b.paginationOptions.pageNumber=a,void 0!==b.getDataForPageCallback&&b.getDataForPageCallback(a)},b.getVisiblePageNumbers=function(a,c){var d=5,e=[];a||(a=b.paginationOptions.totalPages),c||(c=a,a=1);var f=a,g=c;if(c-a>=d){var h=b.paginationOptions.pageNumber;d-1>h?(f=1,g=d):3>c-h?(f=c-d+1,g=c):(f=h-Math.floor(d/2)>1?h-Math.floor(d/2):1,g=h+Math.floor(d/2)>c?c:h+Math.floor(d/2))}for(var i=f;g>=i;i++)e.push(i);return e}},c=function(){return{controller:"WfmPaginationCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"wfm-pagination-default.tpl.html",scope:{paginationOptions:"=?",getDataForPageCallback:"=?"},link:a}};angular.module("wfm.pagination").directive("wfmPagination",c).controller("WfmPaginationCtrl",["$scope",b])}(),function(){function a(a){function b(a,b){function c(){a.disableNextDay||(a.nextDay=!a.nextDay)}function d(b){b?a.nextDayToggleText="+ 1":a.nextDayToggleText="+ 0"}function e(b){var c;if(b){var d=moment(a.startTime).add(1,"day");c=moment(a.endTime),d.set("hour",c.get("hour")).set("minute",c.get("minute")),a.endTime=d.toDate()}else{var e=moment(a.startTime);c=moment(a.endTime),e.set("hour",c.get("hour")).set("minute",c.get("minute")),a.endTime=e.toDate()}}function f(){var b=moment(a.startTime),c=moment(a.endTime);return!b.isSame(c,"day")&&b.isBefore(c)}function g(a){return a?j.indexOf(a)>=0:j.length>0}function h(){j.splice(0,j.length),a.startTime&&a.endTime?a.startTime>=a.endTime&&j.push("order"):j.push("empty"),angular.isDefined(a.errors)&&(a.errors=j)}var i=this;b.addClass("wfm-time-range-picker-wrap");var j=[];angular.isDefined(a.errors)&&(a.errors=j),a.startTime||(a.startTime=moment({hour:8}).toDate()),a.endTime||(a.endTime=moment({hour:17}).toDate()),a.nextDay=f(),a.isInvalid=g,a.toggleNextDay=c,a.nextDayToggleText="+ 0",i.setDateValue=e,i.checkValidity=h,i.setNextDayToggleText=d}function d(b,c,d,e){var f=e[0];b.$watch("nextDay",function(a){f.setDateValue(a),f.setNextDayToggleText(a)}),b.$watch(function(){return{n:b.nextDay,s:b.startTime?a("date")(b.startTime,"HH:mm"):"",e:b.endTime?a("date")(b.endTime,"HH:mm"):""}},function(a){b.disableNextDay&&("00:00"===a.e?b.$evalAsync(function(){b.nextDay=!0}):b.nextDay&&(b.nextDay=!1)),f.checkValidity()},!0),b.showMessage=!angular.isDefined(d.hideMessage)}return{template:c(),scope:{startTime:"=",endTime:"=",disableNextDay:"=?",errors:"=?",hideMessage:"=?"},controller:["$scope","$element",b],require:["timeRangePicker"],transclude:!0,link:d}}function b(){function a(a,b){var d=b.ngModel;a.addClass("wfm-timepicker-wrap");var e=a.find("timepicker");e.attr("ng-model",d),e.attr("show-meridian","showMeridian"),e.attr("minute-step","minuteStep"),c.showMeridian&&e.attr("meridians","meridians")}function b(a){a.showMeridian=c.showMeridian,a.minuteStep=5,c.showMeridian&&(a.meridians=[c.am,c.pm])}var c=d();return{template:"<timepicker></timepicker>",controller:["$scope",b],compile:a}}function c(){return"<div ng-class=\"{'ng-valid': !isInvalid(), 'ng-invalid': isInvalid(), 'ng-invalid-order': isInvalid('order'), 'ng-invalid-empty': isInvalid('empty')}\"> <table>    <tr>      <td><ng-transclude></ng-transclude></td>      <td><timepicker-wrap ng-model=\"startTime\"></timepicker></td>      <td> <i class=\"mdi mdi-minus\"> </i> </td>      <td><timepicker-wrap ng-model=\"endTime\"></timepicker></td>      <td> "+'       <div class="next-day-toggle"  ng-show="!disableNextDay || nextDay" >         <button class="wfm-btn wfm-btn-invis-default" ng-class="{\'wfm-btn-invis-disabled\': disableNextDay }" ng-click="toggleNextDay()">{{nextDayToggleText}}</button>        </div>            </td>    </tr>  </table> </div><div class="error-msg-container ng-invalid-order alert-error notice-spacer" ng-if="showMessage"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>EndTimeMustBeGreaterOrEqualToStartTime</span></div> <div class="error-msg-container ng-invalid-empty alert-error notice-spacer" ng-if="showMessage"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>StartTimeAndEndTimeMustBeSet</span></div>'}function d(){var a=moment.localeData()._longDateFormat.LT,b={};return/h:/.test(a)?(b.showMeridian=!0,b.am=moment.localeData().meridiem(9,0),b.pm=moment.localeData().meridiem(15,0)):b.showMeridian=!1,b}angular.module("wfm.timerangepicker",[]).directive("timepickerWrap",[b]).directive("timeRangePicker",["$filter",a])}(),angular.module("wfm.directives.templates",[]).run(["$templateCache",function(a){a.put("directives/date-range-picker/wfm-date-range-picker.tpl.html",'<div ng-show="templateType===\'inline\'" class="wfm-block clearfix picker-template-inline">\r\n	<div ng-class="{ \'ng-valid\': !isInvalid(), \'ng-invalid\': isInvalid(), \'ng-invalid-order\': isInvalid(\'order\'), \'ng-invalid-empty\': isInvalid(\'empty\')}">\r\n		<div class="wfm-datepicker-wrap no-boxshadow">\r\n			<div class="sub-header">\r\n				<span translate>From</span> <strong>{{ startDate | date: "shortDate" }}</strong>\r\n				<div class="icon-set form-validation-sign datepickerfix">\r\n					<i class="mdi mdi-check right-sign "></i>\r\n					<i class="mdi mdi-close wrong-sign"></i>\r\n				</div>\r\n			</div>\r\n			<datepicker name="startDatePicker" show-weeks="true" class="wfm-datepicker datepicker-start-date" ng-model="startDate" ng-disabled="disabled"\r\n						custom-class="setRangeClass(date, mode)"></datepicker>\r\n		</div>\r\n		<div class="wfm-datepicker-wrap no-boxshadow">\r\n			<div class="sub-header">\r\n				<span translate>To</span> <strong>{{ endDate | date: "shortDate" }}</strong>\r\n				<div class="icon-set form-validation-sign datepickerfix">\r\n					<i class="mdi mdi-check right-sign"></i>\r\n					<i class="mdi mdi-close wrong-sign"></i>\r\n				</div>\r\n			</div>\r\n			<datepicker show-weeks="true" class="wfm-datepicker datepicker-end-date" ng-model="endDate" ng-disabled="disabled" custom-class="setRangeClass(date, mode)"></datepicker>\r\n		</div>\r\n		<div class="error-msg-container ng-invalid-order alert-error notice-spacer" ng-if="showMessage"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>StartDateMustBeEqualToOrEarlierThanEndDate</span></div>\r\n		<div class="error-msg-container ng-invalid-empty alert-error notice-spacer" ng-if="showMessage"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>StartDateAndEndDateMustBeSet</span></div>\r\n	</div>\r\n</div>\r\n<div ng-show="templateType===\'dropdown\'" class="inline-block picker-template-dropdown" >\r\n	<div ng-class="{\'ng-valid\': !isInvalid(), \'ng-invalid\': isInvalid(), \'ng-invalid-order\': isInvalid(\'order\'), \'ng-invalid-empty\': isInvalid(\'empty\')}">\r\n		<span translate class="hor-m-5">From</span>\r\n		<div class="inline-block relative">\r\n			<input class="pointer start-date-input"\r\n				   type="text"\r\n				   ng-click="onClickStartDateInput()"\r\n				   ng-model="startDate"\r\n				   uib-datepicker-popup="{{shortDate}}"\r\n				   on-open-focus="false"\r\n				   custom-class="setRangeClass(date, mode)"\r\n				   show-weeks="true"\r\n				   is-open="dropDownState.showStartDatePicker"\r\n				   ng-required="true"\r\n				   show-button-bar="false"\r\n				   close-on-date-selection="false" />\r\n		</div>\r\n		<span translate class="hor-m-5">To</span>\r\n		<div class="inline-block relative">\r\n			<input class="pointer end-date-input"\r\n				   type="text"\r\n				   ng-click="onClickEndDateInput()"\r\n				   ng-model="endDate"\r\n				   uib-datepicker-popup="{{shortDate}}"\r\n				   on-open-focus="false"\r\n				   show-weeks="true"\r\n				   custom-class="setRangeClass(date, mode)"\r\n				   is-open="dropDownState.showEndDatePicker"\r\n				   ng-required="true"\r\n				   show-button-bar="false"\r\n				   close-on-date-selection="false" />\r\n		</div>\r\n		<span class=\'pointer iconfix\' ng-mouseenter="hoverShow=true" ng-mouseleave="hoverShow=false" ng-click="onClickShowAllDates()"\r\n			  ng-class=\'{"pin-down" : dropDownState.showAllDatePickers}\'><i class="mdi mdi-calendar middle"></i></span>\r\n		<div class="error-msg-container invalid-order alert-error notice-spacer" ng-if="hoverShow"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>StartDateMustBeEqualToOrEarlierThanEndDate</span></div>\r\n		<div class="error-msg-container invalid-empty alert-error notice-spacer" ng-if="hoverShow"><i class=\'mdi mdi-alert-octagon\'></i> <span translate>StartDateAndEndDateMustBeSet</span></div>\r\n	</div>\r\n</div>\r\n')}]),function(){angular.module("wfm.workinghourspicker",["wfm.timerangepicker","pascalprecht.translate"])}(),function(){function a(a){return function(b){var c=moment.localeData(a.use()),d=c._weekdaysShort;return b.WeekDay>=d.length?"":d[b.WeekDay]}}angular.module("wfm.workinghourspicker").filter("showWeekdays",["$translate",a])}(),function(){angular.module("wfm.workinghourspicker").service("workingHoursService",["$locale",function(a){this.createEmptyWorkingPeriod=function(a,b){for(var c=[],d=moment.localeData()._week?moment.localeData()._week.dow:0,e=0;7>e;e++){var f=(d+e)%7;c.push({WeekDay:f,Checked:!1})}return{StartTime:a,EndTime:b,WeekDaySelections:c}}}]),angular.module("wfm.workinghourspicker").directive("workingHoursPicker",["$q","$translate","$filter","$locale","workingHoursService",function(a,b,c,d,e){function f(f,g,h){function i(a){var b=f.workingHours[a].WeekDaySelections.every(function(a){return a.Checked});b?angular.forEach(f.workingHours[a].WeekDaySelections,function(a){a.Checked=!1}):angular.forEach(f.workingHours[a].WeekDaySelections,function(b){b.Checked=!0,j(a,b.WeekDay)})}function j(a,b){m(f.workingHours,a,b)}function k(a,b){f.workingHours.push(e.createEmptyWorkingPeriod(angular.copy(a),angular.copy(b)))}function l(a){f.workingHours.splice(a,1)}function m(a,b,c){angular.forEach(a,function(a,d){d!=b&&angular.forEach(a.WeekDaySelections,function(a){c==a.WeekDay&&(a.Checked=!1)})})}function n(a,b){var e=moment(a),f=moment(b);return e.isSame(f,"day")?c("date")(a,d.DATETIME_FORMATS.shortTime)+" - "+c("date")(b,d.DATETIME_FORMATS.shortTime):c("date")(a,d.DATETIME_FORMATS.shortTime)+" - "+c("date")(b,d.DATETIME_FORMATS.shortTime)+" +1"}f.enforceRadioBehavior=j,f.addEmptyWorkingPeriod=k,f.removeWorkingPeriod=l,f.getTimerangeDisplay=n,f.toggleAllChecks=i,f.disableNextDay=!0;var o,p=e.createEmptyWorkingPeriod().WeekDaySelections,q=[];for(o=0;o<p.length;o++)q.push(b(c("showWeekdays")(p[o])));a.all(q).then(function(a){for(o=0;o<p.length;o++)p[o].Text=a[o];f.weekDays=p})}return{restrict:"E",scope:{workingHours:"="},templateUrl:"directives/workinghourspicker/working-hours-picker.tpl.html",link:f}}])}();